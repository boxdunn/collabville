package  {	import flash.display.MovieClip;	import states.*;	import flash.display.StageScaleMode;		public class ChainReaction extends MovieClip{		private var _state:State;		private var level:int = 0		public function ChainReaction() {			showLogin()			stage.scaleMode = StageScaleMode.NO_SCALE		}				public function showLogin():void{			state = new LoginState(showMenu);		}				public function showMenu():void{			//LoginState.playerObject.level = 0			state = new IntroState();		}				public function startGame():void{			showLevel(LoginState.playerObject.level || 0)		}				public function showLevel(level:int):void{			this.level = level;						//Player has gained a new level. Save it to database			if(!LoginState.playerObject.level || level > LoginState.playerObject.level){				LoginState.playerObject.level = level				LoginState.playerObject.save()			}			this.level = level			state = new GameState(1+level,10+level)			showInfo("Level " + (level + 1), "Explode " + (1+level) + " bomb out of " + (10+level) + " bombs to win this level.")		}				public function sameLevel():void{			showLevel(level)		}				public function nextLevel():void{			showLevel(++level)		}				public function showInfo(headline:String, text:String):void{			var ib:InfoBox = new InfoBox(headline, text);			ib.x = 640/2			ib.y = 480/2			addChild(ib);		}		public function set state(s:State):void{			if(_state) removeChild(_state);			s.base = this;			addChild(_state = s)		}			}}